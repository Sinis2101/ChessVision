<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Chess Vision</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body>
  <div id="header"></div>
  <div id="timer"></div>
  <div id="cell"></div>
  <div id="game"></div>
  <script type="text/babel">

    ReactDOM.render(
      <h1>Chess Vision</h1>,
      document.getElementById('header')
    );

    class Timer extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          seconds: 0,
          minutes: 1,
          secFormat: '0',
          minFormat: '0'
        };
      }

      tick() {

        if (this.state.seconds == 0 && this.state.minutes > 0) {
          this.setState(state => ({
            secFormat: ''
          }));
        } else if (this.state.seconds > 10) {
          this.setState(state => ({
            secFormat: ''
          }));
        } else {
          this.setState(state => ({
            secFormat: '0'
          }));
        }

        if (this.state.minutes > 9) {
          this.setState(state => ({
            minFormat: ''
          }));
        } else {
          this.setState(state => ({
            minFormat: '0'
          }));
        }

        if (this.state.seconds == 0 && this.state.minutes > 0) {
          this.setState(state => ({
            seconds: 60,
            minutes: state.minutes - 1
          }));
        }
        if (this.state.seconds > 0) {
          this.setState(state => ({
            seconds: state.seconds - 1
          }));
        }
      }

      componentDidMount() {
        this.interval = setInterval(() => this.tick(), 1000);
      }

      componentWillUnmount() {
        clearInterval(this.interval);
      }

      render() {
        return (
          <div>
            Time: {this.state.minFormat}{this.state.minutes}:{this.state.secFormat}{this.state.seconds}
          </div>
        );
      }
    }

    ReactDOM.render(
      <Timer />,
      document.getElementById('timer')
    );

    class RandomCell extends React.Component {

      constructor(props) {
        super(props);
        this.state = {
          column: 'Z',
          row: 0
        };
      }

      componentDidMount() {
        const randomRow = Math.floor(Math.random() * (9 - 1)) + 1;
        const randomColumn = Math.floor(Math.random() * (73 - 65)) + 65;

        this.setState(state => ({
            column: String.fromCharCode(randomColumn),
            row: randomRow
          }));
      }

      render() {
        return (
          <h1>
            {this.state.column}{this.state.row}
          </h1>
        );
      }
    }

    ReactDOM.render(
      <RandomCell />,
      document.getElementById('cell')
    );

    class Square extends React.Component {
      render() {
        return (
          <button className="square">
            {this.props.value}
          </button>
        );
      }
    }

    class Board extends React.Component {
      renderSquare(i) {
        return <Square value={i} />;
      }

      render() {
        return (
          <section>
            {this.renderSquare("1⠀⠀⠀⠀A")}
            {this.renderSquare("⠀⠀⠀⠀ B")}
            {this.renderSquare("⠀⠀⠀⠀ C")}
            {this.renderSquare("⠀⠀⠀⠀ D")}
            {this.renderSquare("⠀⠀⠀⠀ E")}
            {this.renderSquare("⠀⠀⠀⠀ F")}
            {this.renderSquare("⠀⠀⠀⠀ G")}
            {this.renderSquare("⠀⠀⠀⠀ H")}
            {this.renderSquare(2)}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare(3)}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare(4)}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare(5)}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare(6)}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare(7)}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare(8)}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
            {this.renderSquare()}
          </section>
        );
      }
    }

    class Game extends React.Component {
      render() {
        return (
          <div className="game">
            <div className="game-board">
              <Board />
            </div>
            <div className="game-info">
              <div>{/* status */}</div>
              <ol>{/* TODO */}</ol>
            </div>
          </div>
        );
      }
    }

    // ========================================

    ReactDOM.render(
      <Game />,
      document.getElementById('game')
    );

  </script>
</body>

</html>